!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.download=t()}(this,function(){return function e(t,n,o,a){var r,i,d=window,s="application/octet-stream",c=(a=a||[],o||s),l=t,u=!n&&!o&&l,f=document.createElement("a"),p=function(e){return String(e)},m=d.Blob||d.MozBlob||d.WebKitBlob||p,b=n||"download";if(m=m.call?m.bind(d):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),u&&u.length<2048&&(b=u.split("/").pop().split("?")[0],f.href=u,-1!==f.href.indexOf(u))){var w=a.AccessControlAllowOrigin,h=new XMLHttpRequest;return h.open("GET",u,!0),h.responseType="blob",h.setRequestHeader("Access-Control-Allow-Origin",w.join(", ")),h.onload=function(t){e(t.target.response,b,s)},setTimeout(function(){h.send()},0),h}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&m!==p))return navigator.msSaveBlob?navigator.msSaveBlob(A(l),b):R(l);l=A(l),c=l.type||s}else if(/([\x80-\xff])/.test(l)){for(var g=0,v=new Uint8Array(l.length),y=v.length;g<y;++g)v[g]=l.charCodeAt(g);l=new m([v],{type:c})}function A(e){for(var t=e.split(/[:;,]/),n=t[1],o=("base64"==t[e.indexOf("charset")>0?3:2]?atob:decodeURIComponent)(t.pop()),a=o.length,r=0,i=new Uint8Array(a);r<a;++r)i[r]=o.charCodeAt(r);return new m([i],{type:n})}function R(e,t){if("download"in f)return f.href=e,f.setAttribute("download",b),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",f.addEventListener("click",function(e){e.stopPropagation(),this.removeEventListener("click",arguments.callee)}),document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),!0===t&&setTimeout(function(){d.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(r=l instanceof m?l:new m([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(r,b);if(d.URL)R(d.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===p)try{return R("data:"+c+";base64,"+d.btoa(r))}catch(e){return R("data:"+c+","+encodeURIComponent(r))}(i=new FileReader).onload=function(e){R(this.result)},i.readAsDataURL(r)}return!0}});